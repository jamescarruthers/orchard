<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Orchard - Chord Generator</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app">
    <header class="header">
      <h1>Orchard</h1>
      <div class="midi-status" id="midiStatus">
        <span class="status-dot"></span>
        <span class="status-text">MIDI Not Connected</span>
      </div>
    </header>

    <main class="main">
      <!-- Chord Display -->
      <section class="chord-display">
        <div class="chord-name" id="chordName">-</div>
        <div class="chord-notes" id="chordNotes">Press a key to play</div>
      </section>

      <!-- Keyboard -->
      <section class="keyboard-section">
        <div class="keyboard" id="keyboard">
          <!-- Keys will be generated by JS -->
        </div>
      </section>

      <!-- Chord Type Buttons -->
      <section class="chord-buttons">
        <h3>Chord Type</h3>
        <div class="button-row">
          <button class="chord-btn" data-chord="Maj"><span class="btn-label">Maj</span><span class="btn-key">1</span></button>
          <button class="chord-btn" data-chord="Min"><span class="btn-label">Min</span><span class="btn-key">2</span></button>
          <button class="chord-btn" data-chord="Sus"><span class="btn-label">Sus</span><span class="btn-key">3</span></button>
          <button class="chord-btn" data-chord="Dim"><span class="btn-label">Dim</span><span class="btn-key">4</span></button>
        </div>
      </section>

      <!-- Extension Buttons -->
      <section class="extension-buttons">
        <h3>Extensions</h3>
        <div class="button-row">
          <button class="ext-btn" data-ext="6"><span class="btn-label">6</span><span class="btn-key">5</span></button>
          <button class="ext-btn" data-ext="m7"><span class="btn-label">m7</span><span class="btn-key">6</span></button>
          <button class="ext-btn" data-ext="M7"><span class="btn-label">M7</span><span class="btn-key">7</span></button>
          <button class="ext-btn" data-ext="9"><span class="btn-label">9</span><span class="btn-key">8</span></button>
        </div>
      </section>

      <!-- Split Keyboard Section -->
      <section class="split-section">
        <div class="split-header">
          <h3>Keyboard Split</h3>
          <label class="split-toggle"><input type="checkbox" id="splitEnabled"> Enable Split</label>
        </div>
        <div class="split-controls" id="splitControls">
          <div class="split-point">
            <label>Split Point</label>
            <select id="splitPoint">
              <option value="48">C3</option>
              <option value="52">E3</option>
              <option value="53">F3</option>
              <option value="55">G3</option>
              <option value="60" selected>C4 (Middle C)</option>
              <option value="64">E4</option>
              <option value="65">F4</option>
              <option value="67">G4</option>
              <option value="72">C5</option>
            </select>
          </div>
        </div>
      </section>

      <!-- Zone Controls - shown when split enabled -->
      <div class="zone-panels" id="zonePanels">
        <!-- Lower Zone -->
        <section class="controls-panel zone-panel">
          <div class="zone-header">Lower Zone (Left Hand)</div>

          <div class="control-group">
            <h3>Mode</h3>
            <select id="lowerZoneMode">
              <option value="off">Off (Pass-through)</option>
              <option value="quantize">Quantize Only</option>
              <option value="chord" selected>Chord Generation</option>
            </select>
          </div>

          <div class="zone-chord-settings" id="lowerChordSettings">
            <div class="control-group">
              <h3>Chord Type</h3>
              <select id="lowerChordType">
                <option value="">Manual (use buttons)</option>
                <option value="Maj">Major</option>
                <option value="Min">Minor</option>
                <option value="Sus">Sus4</option>
                <option value="Dim">Diminished</option>
                <option value="auto">Auto (from scale)</option>
              </select>
            </div>

            <div class="control-group">
              <h3>Playstyle</h3>
              <div class="radio-group">
                <label><input type="radio" name="lowerPlaystyle" value="simple"> Simple</label>
                <label><input type="radio" name="lowerPlaystyle" value="advanced" checked> Advanced</label>
                <label><input type="radio" name="lowerPlaystyle" value="free"> Free</label>
              </div>
            </div>

            <div class="control-group">
              <h3>Performance Mode</h3>
              <select id="lowerPerformanceMode">
                <option value="off">Off</option>
                <option value="strum">Strum</option>
                <option value="strum2oct">Strum 2 Oct</option>
                <option value="slop">Slop</option>
                <option value="arp">Arpeggiator</option>
                <option value="arp2oct">Arp 2 Oct</option>
                <option value="harp">Harp</option>
              </select>
            </div>

            <div class="control-group">
              <h3>Key / Scale</h3>
              <div class="key-mode-controls">
                <select id="lowerKeyRoot">
                  <option value="0">C</option>
                  <option value="1">C#</option>
                  <option value="2">D</option>
                  <option value="3">D#</option>
                  <option value="4">E</option>
                  <option value="5">F</option>
                  <option value="6">F#</option>
                  <option value="7">G</option>
                  <option value="8">G#</option>
                  <option value="9">A</option>
                  <option value="10">A#</option>
                  <option value="11">B</option>
                </select>
                <select id="lowerKeyScale">
                  <option value="major">Major</option>
                  <option value="natural_minor">Natural Minor</option>
                  <option value="harmonic_minor">Harmonic Minor</option>
                  <option value="dorian">Dorian</option>
                  <option value="mixolydian">Mixolydian</option>
                  <option value="pentatonic_major">Pentatonic Major</option>
                  <option value="pentatonic_minor">Pentatonic Minor</option>
                  <option value="blues">Blues</option>
                </select>
                <div class="key-mode-options">
                  <label><input type="checkbox" id="lowerQuantizeEnabled"> Quantize to Key</label>
                  <label><input type="checkbox" id="lowerKeyModeEnabled"> Auto Chord Type</label>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Upper Zone -->
        <section class="controls-panel zone-panel">
          <div class="zone-header">Upper Zone (Right Hand)</div>

          <div class="control-group">
            <h3>Mode</h3>
            <select id="upperZoneMode">
              <option value="off" selected>Off (Pass-through)</option>
              <option value="quantize">Quantize Only</option>
              <option value="chord">Chord Generation</option>
            </select>
          </div>

          <div class="zone-chord-settings" id="upperChordSettings" style="display: none;">
            <div class="control-group">
              <h3>Chord Type</h3>
              <select id="upperChordType">
                <option value="">Manual (use buttons)</option>
                <option value="Maj">Major</option>
                <option value="Min">Minor</option>
                <option value="Sus">Sus4</option>
                <option value="Dim">Diminished</option>
                <option value="auto">Auto (from scale)</option>
              </select>
            </div>

            <div class="control-group">
              <h3>Playstyle</h3>
              <div class="radio-group">
                <label><input type="radio" name="upperPlaystyle" value="simple"> Simple</label>
                <label><input type="radio" name="upperPlaystyle" value="advanced" checked> Advanced</label>
                <label><input type="radio" name="upperPlaystyle" value="free"> Free</label>
              </div>
            </div>

            <div class="control-group">
              <h3>Performance Mode</h3>
              <select id="upperPerformanceMode">
                <option value="off">Off</option>
                <option value="strum">Strum</option>
                <option value="strum2oct">Strum 2 Oct</option>
                <option value="slop">Slop</option>
                <option value="arp">Arpeggiator</option>
                <option value="arp2oct">Arp 2 Oct</option>
                <option value="harp">Harp</option>
              </select>
            </div>

            <div class="control-group">
              <h3>Key / Scale</h3>
              <div class="key-mode-controls">
                <select id="upperKeyRoot">
                  <option value="0">C</option>
                  <option value="1">C#</option>
                  <option value="2">D</option>
                  <option value="3">D#</option>
                  <option value="4">E</option>
                  <option value="5">F</option>
                  <option value="6">F#</option>
                  <option value="7">G</option>
                  <option value="8">G#</option>
                  <option value="9">A</option>
                  <option value="10">A#</option>
                  <option value="11">B</option>
                </select>
                <select id="upperKeyScale">
                  <option value="major">Major</option>
                  <option value="natural_minor">Natural Minor</option>
                  <option value="harmonic_minor">Harmonic Minor</option>
                  <option value="dorian">Dorian</option>
                  <option value="mixolydian">Mixolydian</option>
                  <option value="pentatonic_major">Pentatonic Major</option>
                  <option value="pentatonic_minor">Pentatonic Minor</option>
                  <option value="blues">Blues</option>
                </select>
                <div class="key-mode-options">
                  <label><input type="checkbox" id="upperQuantizeEnabled"> Quantize to Key</label>
                  <label><input type="checkbox" id="upperKeyModeEnabled"> Auto Chord Type</label>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>

      <!-- Global Controls Panel (shown when split disabled) -->
      <section class="controls-panel" id="globalControls">
        <div class="control-group">
          <h3>Mode</h3>
          <select id="globalMode">
            <option value="off">Off (Pass-through)</option>
            <option value="quantize">Quantize Only</option>
            <option value="chord" selected>Chord Generation</option>
          </select>
        </div>

        <div class="control-group">
          <h3>Playstyle</h3>
          <div class="radio-group">
            <label><input type="radio" name="playstyle" value="simple"> Simple</label>
            <label><input type="radio" name="playstyle" value="advanced" checked> Advanced</label>
            <label><input type="radio" name="playstyle" value="free"> Free</label>
          </div>
        </div>

        <div class="control-group">
          <h3>Performance Mode</h3>
          <select id="performanceMode">
            <option value="off">Off</option>
            <option value="strum">Strum</option>
            <option value="strum2oct">Strum 2 Oct</option>
            <option value="slop">Slop</option>
            <option value="arp">Arpeggiator</option>
            <option value="arp2oct">Arp 2 Oct</option>
            <option value="harp">Harp</option>
          </select>
        </div>

        <div class="control-group">
          <h3>Key / Scale</h3>
          <div class="key-mode-controls">
            <select id="keyRoot">
              <option value="0">C</option>
              <option value="1">C#</option>
              <option value="2">D</option>
              <option value="3">D#</option>
              <option value="4">E</option>
              <option value="5">F</option>
              <option value="6">F#</option>
              <option value="7">G</option>
              <option value="8">G#</option>
              <option value="9">A</option>
              <option value="10">A#</option>
              <option value="11">B</option>
            </select>
            <select id="keyScale">
              <option value="major">Major</option>
              <option value="natural_minor">Natural Minor</option>
              <option value="harmonic_minor">Harmonic Minor</option>
              <option value="dorian">Dorian</option>
              <option value="mixolydian">Mixolydian</option>
              <option value="pentatonic_major">Pentatonic Major</option>
              <option value="pentatonic_minor">Pentatonic Minor</option>
              <option value="blues">Blues</option>
            </select>
            <div class="key-mode-options">
              <label><input type="checkbox" id="quantizeEnabled"> Quantize to Key</label>
              <label><input type="checkbox" id="keyModeEnabled"> Auto Chord Type</label>
            </div>
          </div>
        </div>
      </section>

      <!-- Dials -->
      <section class="dials-section">
        <div class="dial-container">
          <label>Voicing</label>
          <input type="range" id="voicingDial" min="-4" max="4" value="0">
          <span class="dial-value" id="voicingValue">0</span>
        </div>
        <div class="dial-container">
          <label>Bass</label>
          <input type="range" id="bassDial" min="-2" max="2" value="0">
          <span class="dial-value" id="bassValue">0</span>
        </div>
        <div class="dial-container">
          <label>Performance</label>
          <input type="range" id="performanceDial" min="0" max="127" value="64">
          <span class="dial-value" id="performanceValue">64</span>
        </div>
        <div class="dial-container">
          <label>BPM</label>
          <input type="range" id="bpmDial" min="40" max="240" value="120">
          <span class="dial-value" id="bpmValue">120</span>
        </div>
      </section>

      <!-- Arp Settings -->
      <section class="arp-settings" id="arpSettings">
        <div class="control-group">
          <h3>Arp Pattern</h3>
          <select id="arpPattern">
            <option value="up">Up</option>
            <option value="down">Down</option>
            <option value="upDown">Up/Down</option>
            <option value="downUp">Down/Up</option>
            <option value="random">Random</option>
          </select>
        </div>
        <div class="control-group">
          <h3>Arp Division</h3>
          <select id="arpDivision">
            <option value="1/4">1/4</option>
            <option value="1/8" selected>1/8</option>
            <option value="1/12">1/12</option>
            <option value="1/16">1/16</option>
            <option value="1/24">1/24</option>
            <option value="1/32">1/32</option>
          </select>
        </div>
      </section>

      <!-- MIDI Selection -->
      <section class="midi-section">
        <div class="midi-group">
          <h3>MIDI Input</h3>
          <select id="midiInput">
            <option value="">Select MIDI Input...</option>
          </select>
        </div>
        <div class="midi-group">
          <h3>MIDI Output</h3>
          <select id="midiOutput">
            <option value="">Select MIDI Output...</option>
          </select>
        </div>
        <div class="midi-group">
          <h3>Options</h3>
          <label class="midi-option"><input type="checkbox" id="suppressRoot"> Suppress root note</label>
          <label class="midi-option"><input type="checkbox" id="muteAudio"> Mute built-in synth</label>
        </div>
        <button id="connectMidi">Refresh MIDI</button>
      </section>

      <!-- Legend -->
      <section class="legend">
        <div class="legend-item">
          <span class="legend-color" style="background: var(--key-active);"></span>
          <span>Input Note</span>
        </div>
        <div class="legend-item">
          <span class="legend-color" style="background: #4ecdc4;"></span>
          <span>Generated Notes</span>
        </div>
      </section>
    </main>

    <footer class="footer">
      <p>Keyboard: A-L for white keys, W-P for black keys | Space to sustain</p>
    </footer>
  </div>

  <script src="orchard.js"></script>
</body>
</html>
